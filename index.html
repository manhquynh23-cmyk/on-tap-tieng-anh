<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√îN T·∫¨P TI·∫æNG ANH THCS - QUIZ GAME</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f5f7fa;
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --text-color: #2c3e50;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #e0e4e8;
            color: var(--text-color);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #quiz-container {
            background: white;
            width: 90%;
            max-width: 700px;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            border-bottom: 2px solid var(--secondary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
        }

        .settings {
            background: var(--secondary-color);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        #timer-display {
            font-size: 1.2rem;
            color: var(--error-color);
        }

        .question-box {
            margin-bottom: 20px;
        }

        #question-text {
            font-size: 1.2rem;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .option-btn {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            text-align: left;
        }

        .option-btn:hover:not(:disabled) {
            background-color: #f0f7ff;
            border-color: var(--primary-color);
        }

        .correct {
            background-color: var(--success-color) !important;
            color: white !important;
            border-color: var(--success-color) !important;
        }

        .wrong {
            background-color: var(--error-color) !important;
            color: white !important;
            border-color: var(--error-color) !important;
        }

        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
            min-height: 40px;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        button.control-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: opacity 0.3s;
        }

        #next-btn { background-color: var(--primary-color); color: white; }
        #skip-btn { background-color: #95a5a6; color: white; }
        #reset-btn { background-color: #34495e; color: white; }

        button:disabled { opacity: 0.5; cursor: not-allowed; }

        #result-screen {
            text-align: center;
            display: none;
        }

        input[type="number"] {
            width: 50px;
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        /* Responsive */
        @media (max-width: 480px) {
            #quiz-container { padding: 15px; }
            .option-btn { padding: 10px; }
        }
    </style>
</head>
<body>

    <div id="quiz-container">
        <div id="setup-screen">
            <div class="header">
                <h2>LUY·ªÜN T·∫¨P TI·∫æNG ANH</h2>
                <p>C·∫•u tr√∫c ƒë·ªÅ √¥n t·∫≠p THCS (35 c√¢u)</p>
            </div>
            <div class="settings">
                <label>
                    <input type="checkbox" id="timer-toggle" checked> T√≠nh th·ªùi gian
                </label>
                <label>
                    Gi√¢y/c√¢u: <input type="number" id="seconds-input" value="30" min="5">
                </label>
            </div>
            <button class="control-btn" id="next-btn" style="width: 100%; padding: 15px;" onclick="startQuiz()">B·∫ÆT ƒê·∫¶U L√ÄM B√ÄI</button>
        </div>

        <div id="game-screen" style="display: none;">
            <div class="stats">
                <span>C√¢u: <span id="current-idx">1</span>/<span id="total-questions">35</span></span>
                <span id="timer-display">00s</span>
                <span>ƒêi·ªÉm: <span id="score">0</span></span>
            </div>

            <div class="question-box">
                <div id="question-text">ƒêang t·∫£i c√¢u h·ªèi...</div>
                <div class="options-container" id="options-container"></div>
            </div>

            <div id="feedback" class="feedback"></div>

            <div class="controls">
                <button id="skip-btn" class="control-btn" onclick="skipQuestion()">‚è≠Ô∏è B·ªè qua</button>
                <button id="next-btn-game" class="control-btn" onclick="nextQuestion()" disabled>‚û°Ô∏è C√¢u ti·∫øp theo</button>
            </div>
        </div>

        <div id="result-screen">
            <div class="header">
                <h2>K·∫æT QU·∫¢ HO√ÄN TH√ÄNH!</h2>
            </div>
            <h1 id="final-score" style="font-size: 3rem; color: var(--primary-color);">0/35</h1>
            <p id="final-comment"></p>
            <button class="control-btn" id="reset-btn" onclick="location.reload()">üîÑ L√†m l·∫°i b√†i</button>
        </div>
    </div>

    <audio id="audio-correct" src="https://www.soundjay.com/buttons/sounds/button-37.mp3"></audio>
    <audio id="audio-wrong" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

    <script>
        // D·ªÆ LI·ªÜU C√ÇU H·ªéI (35 C√ÇU)
        const quizData = [
            { q: "Pho is one of the most popular dishes in Viet Nam.", a: ["True", "False"], c: 0 },
            { q: "People usually enjoy Pho only for dinner.", a: ["True", "False"], c: 1 },
            { q: "The broth for Pho is made by stewing beef or chicken bones.", a: ["True", "False"], c: 0 },
            { q: "Rice noodles are the main ingredient of Pho.", a: ["True", "False"], c: 0 },
            { q: "You cannot find any herbs or lime in a bowl of Pho.", a: ["True", "False"], c: 1 },
            { q: "What did the students do last summer?", a: ["They went on a forest tour.", "They did community service.", "They joined a sports club."], c: 1 },
            { q: "Who did they help in the project?", a: ["Children", "Elderly people in a nursing home", "Primary students"], c: 1 },
            { q: "How many books did they collect for the poor children?", a: ["Over 100 books", "Over 200 books", "Over 500 books"], c: 2 },
            { q: "What did they do to protect the environment?", a: ["Planted flowers and cleaned the local park.", "Recycled plastic bottles at home.", "Cycled to school every day."], c: 0 },
            { q: "How did the students feel after the project?", a: ["Tired and bored.", "Proud and happy.", "Sad because it ended soon."], c: 1 },
            { q: "My sister loves _______ photos of beautiful landscapes.", a: ["taking", "doing", "playing", "catching"], c: 0 },
            { q: "We should eat more vegetables and fruit because they are _______ for our health.", a: ["bad", "harmful", "good", "quick"], c: 2 },
            { q: "Water puppetry _______ in the villages of the Red River Delta.", a: ["started", "played", "moved", "went"], c: 0 },
            { q: "The 'Dan Bau' is a Vietnamese traditional musical _______.", a: ["tool", "equipment", "instrument", "device"], c: 2 },
            { q: "How _______ calories are there in an apple?", a: ["much", "many", "some", "any"], c: 1 },
            { q: "I don't have _______ butter left to make the cake.", a: ["some", "a", "an", "any"], c: 3 },
            { q: "The Temple of Literature _______ by many people every year.", a: ["is visited", "visit", "visits", "visited"], c: 0 },
            { q: "Last week, we _______ old clothes to help the poor children.", a: ["give", "gave", "will give", "giving"], c: 1 },
            { q: "My hobby is different _______ yours.", a: ["as", "with", "from", "than"], c: 2 },
            { q: "Would you like some lemonade?", a: ["Yes, please.", "No, I don't.", "Yes, I do.", "It's very expensive."], c: 0 },
            { q: "What is your hobby?", a: ["I am a student.", "I like collecting stamps.", "I'm 13 years old.", "I go to school by bus."], c: 1 },
            { q: "(22) You should eat a _______ of foods like meat, fish, vegetables...", a: ["variety", "lot", "many", "group"], c: 0 },
            { q: "(23) _______ enough water is also necessary for your body.", a: ["Drinking", "Drink", "Drank", "Drinks"], c: 0 },
            { q: "(24) Try to avoid eating too much fast food or _______ drinks.", a: ["soft", "hard", "hot", "small"], c: 0 },
            { q: "(25) If you eat well and _______ exercise regularly...", a: ["do", "make", "play", "take"], c: 0 },
            { q: "(26) ...you will _______ fit and strong.", a: ["keep", "will keep", "kept", "keeps"], c: 0 },
            { q: "When was the Temple of Literature built?", a: ["In 1070.", "In 1076.", "In 1082.", "In 2025."], c: 0 },
            { q: "What was Quoc Tu Giam?", a: ["A small school.", "The first university of Viet Nam.", "A modern library.", "A beautiful park."], c: 1 },
            { q: "How many courtyards does the temple have?", a: ["Three.", "Four.", "Five.", "Six."], c: 2 },
            { q: "What can we find on the Doctors' stone tablets?", a: ["The names of famous kings.", "The history of Ha Noi.", "The names of successful students.", "Information about the trees."], c: 2 },
            { q: "Why do students come to the temple before exams?", a: ["To take photos.", "To pray for good luck.", "To study history.", "To see the trees."], c: 1 },
            { q: "S·∫Øp x·∫øp: hobby / My / is / dolls / collecting / .", a: ["My hobby is collecting dolls.", "My hobby collecting is dolls.", "Collecting dolls my hobby is.", "My dolls is collecting hobby."], c: 0 },
            { q: "S·∫Øp x·∫øp: We / morning exercise / every / day / do / should / .", a: ["We should do morning exercise every day.", "We do should morning exercise every day.", "Every day we do morning exercise should.", "Should we do morning exercise every day."], c: 0 },
            { q: "S·∫Øp x·∫øp: is / soup / What / your / favorite / noodle / ?", a: ["What is your favorite noodle soup?", "What your favorite noodle soup is?", "Your favorite noodle soup is what?", "Is what your favorite noodle soup?"], c: 0 },
            { q: "S·∫Øp x·∫øp: visited / We / orphans / the / last / weekend / .", a: ["We visited the orphans last weekend.", "We visited orphans the last weekend.", "Last weekend we the orphans visited.", "Orphans we visited the last weekend."], c: 0 }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let timer;
        let timeLeft;
        let isTimeEnabled = true;

        // Kh·ªüi t·∫°o
        function startQuiz() {
            isTimeEnabled = document.getElementById('timer-toggle').checked;
            timeLeft = parseInt(document.getElementById('seconds-input').value);
            
            document.getElementById('setup-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            document.getElementById('total-questions').innerText = quizData.length;
            
            loadQuestion();
        }

        function loadQuestion() {
            resetState();
            const currentQuestion = quizData[currentQuestionIndex];
            document.getElementById('current-idx').innerText = currentQuestionIndex + 1;
            document.getElementById('question-text').innerText = currentQuestion.q;

            currentQuestion.a.forEach((option, index) => {
                const button = document.createElement('button');
                button.innerText = option;
                button.classList.add('option-btn');
                button.addEventListener('click', () => selectAnswer(index));
                document.getElementById('options-container').appendChild(button);
            });

            if (isTimeEnabled) {
                startTimer();
            } else {
                document.getElementById('timer-display').innerText = "‚àû";
            }
        }

        function resetState() {
            clearInterval(timer);
            document.getElementById('feedback').innerText = "";
            document.getElementById('feedback').className = "feedback";
            document.getElementById('next-btn-game').disabled = true;
            document.getElementById('options-container').innerHTML = "";
        }

        function startTimer() {
            let timeLimit = parseInt(document.getElementById('seconds-input').value);
            timeLeft = timeLimit;
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    handleTimeout();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            document.getElementById('timer-display').innerText = timeLeft + "s";
        }

        function selectAnswer(index) {
            clearInterval(timer);
            const currentQuestion = quizData[currentQuestionIndex];
            const buttons = document.querySelectorAll('.option-btn');
            
            buttons.forEach(btn => btn.disabled = true);

            if (index === currentQuestion.c) {
                buttons[index].classList.add('correct');
                score++;
                document.getElementById('score').innerText = score;
                showFeedback(true);
                document.getElementById('audio-correct').play();
            } else {
                buttons[index].classList.add('wrong');
                buttons[currentQuestion.c].classList.add('correct');
                showFeedback(false);
                document.getElementById('audio-wrong').play();
            }
            document.getElementById('next-btn-game').disabled = false;
        }

        function handleTimeout() {
            const currentQuestion = quizData[currentQuestionIndex];
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => btn.disabled = true);
            buttons[currentQuestion.c].classList.add('correct');
            document.getElementById('feedback').innerText = "H·∫øt th·ªùi gian!";
            document.getElementById('feedback').style.color = "orange";
            document.getElementById('next-btn-game').disabled = false;
        }

        function showFeedback(isCorrect) {
            const feedback = document.getElementById('feedback');
            if (isCorrect) {
                feedback.innerText = "Ch√≠nh x√°c! L√†m t·ªët l·∫Øm. üåü";
                feedback.style.color = "var(--success-color)";
            } else {
                feedback.innerText = "Ti·∫øc qu√°, sai r·ªìi! C·ªë g·∫Øng c√¢u sau nh√©. ‚úçÔ∏è";
                feedback.style.color = "var(--error-color)";
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function skipQuestion() {
            clearInterval(timer);
            nextQuestion();
        }

        function showResults() {
            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            document.getElementById('final-score').innerText = `${score}/${quizData.length}`;
            
            let comment = "";
            const percent = (score / quizData.length) * 100;
            if (percent >= 80) comment = "Xu·∫•t s·∫Øc! B·∫°n l√† thi√™n t√†i ti·∫øng Anh! üèÜ";
            else if (percent >= 50) comment = "Kh√° t·ªët! H√£y √¥n t·∫≠p th√™m ƒë·ªÉ ƒë·∫°t ƒëi·ªÉm tuy·ªát ƒë·ªëi nh√©! üëç";
            else comment = "B·∫°n c·∫ßn c·ªë g·∫Øng nhi·ªÅu h∆°n n·ªØa. ƒê·ª´ng b·ªè cu·ªôc! üí™";
            
            document.getElementById('final-comment').innerText = comment;
        }
    </script>
</body>
</html>